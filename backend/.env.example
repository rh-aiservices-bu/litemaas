# LiteMaaS Backend Environment Configuration
# Copy this to .env and update values for your environment

# Server Configuration
NODE_ENV=development
PORT=8081
HOST=0.0.0.0
LOG_LEVEL=info

# Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/litemaas

# OAuth Configuration
OAUTH_CLIENT_ID=your-openshift-oauth-client-id
OAUTH_CLIENT_SECRET=your-openshift-oauth-client-secret
OAUTH_ISSUER=https://your-openshift-cluster.com

# OAuth Callback URL Configuration
# The application now supports automatic callback URL detection based on the request origin.
# OAUTH_CALLBACK_URL serves as a fallback when automatic detection is not possible.
#
# IMPORTANT: Register ALL possible callback URLs with your OAuth provider:
# - Development (Vite): http://localhost:3000/api/auth/callback
# - Development (Direct): http://localhost:8081/api/auth/callback, http://localhost:8081/api/auth/callback
# - Container (NGINX): http://localhost:8081/api/auth/callback
# - Production: https://your-domain.com/api/auth/callback
#
# The callback URL used during authorization is stored and reused during token exchange
# to ensure OAuth compliance (redirect_uri must match exactly in both requests).
#
# Set this to your primary development URL:
OAUTH_CALLBACK_URL=http://localhost:3000/api/auth/callback

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRES_IN=24h

# LiteLLM Configuration
LITELLM_API_URL=http://your-litellm-instance:8000
LITELLM_API_KEY=your-litellm-api-key

# LiteLLM Sync
LITELLM_AUTO_SYNC=true
LITELLM_SYNC_INTERVAL=60

# Backend API Rate Limiting (NOT for LLM requests)
# These limits protect LiteMaaS management endpoints from abuse
# They control access to user management, API key creation, etc.
# LLM request limits are configured separately via DEFAULT_USER_TPM_LIMIT/RPM_LIMIT
RATE_LIMIT_MAX=1000                    # Max backend API calls per time window
RATE_LIMIT_TIME_WINDOW=5m             # Time window for backend API limits

# CORS Configuration
CORS_ORIGIN=http://localhost:3000

# Admin API Keys (comma-separated list)
ADMIN_API_KEYS=ltm_admin_dev123,ltm_admin_prod456

# Allowed frontend origins for bypass (development and testing)
# In production, implement proper JWT authentication instead
ALLOWED_FRONTEND_ORIGINS=localhost:3000,localhost:3001,127.0.0.1:3000,127.0.0.1:3001

# Default User Values Configuration (for LLM requests via LiteLLM)
# These values are applied to new users when they first log in
# They control LLM usage limits, NOT backend API access
DEFAULT_USER_MAX_BUDGET=100           # Budget in USD for LLM usage
DEFAULT_USER_TPM_LIMIT=100000         # Tokens per minute for LLM requests
DEFAULT_USER_RPM_LIMIT=120            # Requests per minute for LLM requests

# Quick Reference:
# - RATE_LIMIT_* = Protects LiteMaaS backend APIs (login, user mgmt, etc.)
# - DEFAULT_USER_*_LIMIT = Controls LLM request rates through LiteLLM